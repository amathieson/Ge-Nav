<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#f44336">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#f44336">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#f44336">
    <link id="f7-main" rel="stylesheet" href="css/framework7.material.min.css">
    <link id="f7-colors" rel="stylesheet" href="css/framework7.material.colors.min.css">
    <link rel="stylesheet" href="css/my-app.css">
    <link rel="stylesheet" href="material-design-icons/iconfont/material-icons.css">
	<!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" -->
      <!-- rel="stylesheet"> -->
    <link rel="stylesheet" href="css/framework7-icons.css">
    <!--<script src="mdl/material.min.js"></script>-->
    <!--<script src="mdl/getmdl-select.min.js"></script>-->
    <!--<link rel="stylesheet" href="mdl/material.min.css">-->
    <!--<link rel="stylesheet" href="mdl/getmdl-select.min.css">-->
    <title>GéNav - Home</title>
</head>
<body onload="iosMaterialConv();" class="theme-red">
<!-- Status bar overlay for full screen mode (PhoneGap) -->
<div class="statusbar-overlay"></div>
<!-- Panels overlay-->
<div class="panel-overlay"></div>
<!-- Left panel with reveal cover-->
<div class="panel panel-left panel-cover">
    <div class="list-block">
        <ul>
            <li>
                <a href="index.html" onclick="title2TPGApp()" class="item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">home</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-Home">Home</div>
                        </div>
                    </div>
                </a>
            </li>
            <li>
                <a href="http://cityrunner-server.genav.ga/hosted_app/disruptions.php" onclick="title2TPGApp();myApp.showPreloader(translateStr('loading',currentLang));setTimeout(function () {myApp.hidePreloader();}, 1000);" class="hosted item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">warning</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-Disruptions">Disruptions</div>
                        </div>
                    </div>
                </a>
            </li>
            <li>
                <a href="http://cityrunner-server.genav.ga/hosted_app/times.php" onclick="title2TPGApp();myApp.showPreloader(translateStr('loading',currentLang));setTimeout(function () {myApp.hidePreloader();}, 2000);" class="hosted item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">directions_bus</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-Stops">Stops</div>
                        </div>
                    </div>
                </a>
            </li>
            <li>
                <a id="favs" href="http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=" onclick="title2TPGApp();myApp.showPreloader(translateStr('loading',currentLang));setTimeout(function () {myApp.hidePreloader();}, 1000);" class="hosted item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">star</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-Favs">Favorite Stops</div>
                        </div>
                    </div>
                </a>
            <!--</li>-->
            <!--<li>-->
                <!--<a id="routes" href="../hosted_app/routes.php?routes=" onclick="title2TPGApp();myApp.showPreloader(translateStr('loading',currentLang));setTimeout(function () {myApp.hidePreloader();}, 1000);" class="hosted item-link close-panel">-->
                    <!--<div class="item-content">-->
                        <!--<div class="item-media">-->
                            <!--<i class="material-icons">directions</i>-->
                        <!--</div>-->
                        <!--<div class="item-inner">-->
                            <!--<div class="item-title" translateID="nav-routes">Saved Routes</div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</a>-->
            <!--</li>-->
            <li>
                <a href="tickets.html" onclick="title2TPGApp()" class="item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">credit_card</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-SMS">SMS Tickets</div>
                        </div>
                    </div>
                </a>
            </li>
            <li>
                <a href="map.html" onclick="title2TPGApp()" class="item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">map</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-Maps">Maps</div>
                        </div>
                    </div>
                </a>
            </li>
            <!--<li>
                <a href="dir.html" class="item-link close-panel hosted">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">directions</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title">Directions</div>
                        </div>
                    </div>
                </a>
            </li>-->
            <!--<li>
                <a href="lang.html" class="item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">settings</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title">Settings</div>
                        </div>
                    </div>
                </a>
            </li>-->
            <li>
                <a onclick="myApp.alert(translateStr('About-Text',currentLang),translateStr('nav-About',currentLang))" href="#" class="item-link close-panel">
                    <div class="item-content">
                        <div class="item-media">
                            <i class="material-icons">info</i>
                        </div>
                        <div class="item-inner">
                            <div class="item-title" translateID="nav-About">About</div>
                        </div>
                    </div>
                </a>
            </li>
        </ul>
    </div>
</div>
<!-- Views -->
<div class="views">
    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main">
        <!-- Top Navbar-->
        <div class="navbar" id="navbar">
            <div class="navbar-inner">
                <div class="left">
                    <!--
                      Right link contains only icon - additional "icon-only" class
                      Additional "open-panel" class tells app to open panel when we click on this link
                    -->
                    <div hidden id="currStopCode"></div>
                    <div hidden id="currStopName"></div>
                    <div hidden id="currDepCode"></div>
                    <a href="#" class="link icon-only open-panel"><i class="icon icon-bars"></i></a>
                </div>
                <div id="title" class="center">
                    <!--
                      Right link contains only icon - additional "icon-only" class
                      Additional "open-panel" class tells app to open panel when we click on this link
                    -->
                    GéNav
                </div>
                <div class="right">
                    <!--
                      Right link contains only icon - additional "icon-only" class
                      Additional "open-panel" class tells app to open panel when we click on this link
                    -->
                    <!--<a onclick="search();" href="#" class="link icon-only"><i class="material-icons">search</i></a>-->
                    <a onclick="mainView.router.refreshPage();" href="#" class="link icon-only"><i class="material-icons">refresh</i></a>
                </div>
            </div>
        </div>
        <!-- Pages container, because we use fixed-through navbar and toolbar, it has additional appropriate classes-->
        <div class="pages navbar-through toolbar-through">
            <!-- Page, "data-page" contains page name -->
            <div data-page="index" class="page">
                <!-- Scrollable page content -->
                <!-- Search Bar -->
                <form data-search-list=".list-block-search" data-search-in=".item-title" class="searchbar searchbar-init home-bar">
                    <div class="searchbar-input">
                        <input type="search" placeholder="Search Stops" oninput="search()" onmouseleave="search2()">
                        <a href="#" class="searchbar-clear"></a>
                    </div>
                    <a href="#" class="searchbar-cancel">Cancel</a>
                </form>

                <!-- Search Bar overlay-->
                <div class="searchbar-overlay home-bar"></div>
                <div class="page-content">
                    <div class="content-block searchbar-not-found">
                        Nothing found
                    </div>

                    <div class="list-block list-block-search searchbar-found" onmouseover="search()" onmouseleave="search2()">
                        <ul class="home-search">
                            <li class="item-content">
                                <div class="item-inner">
                                    <div class="item-title disabled">Sorry but this feature is not available offline<div hidden>a b c d e f g h i j k l m n o p q r s t u v w x y z</div></div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="row" onclick="search2()">
                        <div class="col-100 tablet-50">
                            <div class="card">
                                <div class="card-content">
                                    <div class="card-header"><div><i class="material-icons" style="top: 5px; position: relative;">warnings</i> Disruptions</div><a href="#" onclick='$.get("../hosted_app/disruptions-home.php", function(data, status){document.getElementsByClassName("homeDis")[0].innerHTML = data;document.getElementsByClassName("homeDis")[1].innerHTML = data;});'><i class="material-icons">refresh</i></a></div>
                                    <div class="card-content-inner homeDis" id="homeDis">
                                        Disruptions are not available offline.
                                    </div>
                                    <div class="card-footer">
                                        <a href="http://cityrunner-server.genav.ga/hosted_app/disruptions.php">Disruptions</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-100 tablet-50">
                            <div class="card disabled">
                                <div class="card-content">
                                    <div class="card-header"><div><i class="material-icons" style="top: 5px; position: relative;">directions</i> Routes</div></div>
                                    <div class="card-content-inner">
                                        <!--No routes saved yet!-->
                                        Sorry but this card is not currently available.
                                    </div>
                                    <div class="card-footer">
                                        <a href="routes.html" onclick="myApp.alert('Routes are not yet available!', 'Sorry')" class="disabled">Routes</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" onclick="search2()">
                        <div class="col-100 tablet-100">
                            <div class="card disabled">
                                <div class="card-content">
                                    <div class="card-header"><div><i class="material-icons" style="top: 5px; position: relative;">star</i> Favorite Stops</div></div>
                                    <div class="card-content-inner">
                                        <!--Favorite stops are not available offline-->
                                        Sorry but this card is not currently available.
                                    </div>
                                    <div class="card-footer">
                                        <a id="homeFav" href="http://cityrunner-server.genav.g/hosted_app/favs.php?stopCodes=" class="disabled">Favorite Stops</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="js/framework7.min.js"></script>
<!--<script type="text/javascript" src="js/my-app.js"></script>-->
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/AppUpdater.js"></script>
<script language="javascript" src="js/lz-string.min.js"></script>
<script language="javascript" src="js/translate.js"></script>
<script language="javascript" src="js/strings.js"></script>

<script type="text/javascript">
    // Initialize your app
    var myApp = new Framework7(
          {
//            material: true,
            pushState: true
          }
    );
    // Export selectors engine
    var $$ = Dom7;

    var mainView = myApp.addView('.view-main');
    var currentLang = "EN";
    // Option 1. Using one 'page:init' handler for all pages (recommended way):
    $$(document).on('page:init', function (e) {
        // Do something here when page loaded and initialized
        translatePage(currentLang);
    });
    $$('.add-route').on('click', function () {
        myApp.popup('.add-route-popup');
    });
    var fruits = ('Apple Apricot Avocado Banana Melon Orange Peach Pear Pineapple').split(' ');
    myApp.onPageReinit  ("tmp", function (page) {
        var fruits = ('Apple Apricot Avocado Banana Melon Orange Peach Pear Pineapple').split(' ');
        // Simple Dropdown
        myApp.autocomplete({
            input: '#autocomplete-dropdown',
            openIn: 'dropdown',
            source: function (autocomplete, query, render) {
                var results = [];
                if (query.length === 0) {
                    render(results);
                    return;
                }
                // Find matched items
                for (var i = 0; i < fruits.length; i++) {
                    if (fruits[i].toLowerCase().indexOf(query.toLowerCase()) >= 0) results.push(fruits[i]);
                }
                // Render items by passing array with result items
                render(results);
            }
        });
    });
    myApp.onPageInit("index", function (page) {
        search2();
        $.get("http://cityrunner-server.genav.ga/hosted_app/disruptions-home.php", function(data, status){
            document.getElementsByClassName("homeDis")[0].innerHTML = data;
            document.getElementsByClassName("homeDis")[1].innerHTML = data;
        });
        $.get("http://cityrunner-server.genav.ga/hosted_app/times-home.php", function(data, status){
            document.getElementsByClassName("home-search")[0].innerHTML = data;
            document.getElementsByClassName("home-search")[1].innerHTML = data;
        });
    });
    function search() {
        var els = document.getElementsByClassName("list-block-search");

        Array.prototype.forEach.call(els, function(el) {
            // Do stuff here
            el.style.visibility = "visible";
            el.style.height = null;
            el.style.marginTop = 32;
            el.style.marginBottom = 32;
        });
    }
    function search2() {
        var els = document.getElementsByClassName("list-block-search");

        Array.prototype.forEach.call(els, function(el) {
            // Do stuff here
            el.style.visibility = "hidden";
            el.style.height = 0;
            el.style.marginTop = 0;
            el.style.marginBottom = 0;
        });
    }
    myApp.onPageInit("routes", function () {
        var options = {
            url: "js/GetStops.json",

            getValue: "stopName",

            list: {
                match: {
                    enabled: true
                }
            }
        };
        var autocompleteDropdownAjax = myApp.autocomplete({
            opener: '#stops1',
            openIn: 'popup',
            preloader: true, //enable preloader
            valueProperty: 'stopCode', //object's "value" property name
            textProperty: 'stopName', //object's "text" property name
            limit: 20, //limit to 20 results
            dropdownPlaceholderText: 'Aeroport',
            expandInput: true, // expand input
            source: function (autocomplete, query, render) {
                var results = [];
                if (query.length === 0) {
                    render(results);
                    return;
                }
                // Show Preloader
                autocomplete.showPreloader();
                // Do Ajax request to Autocomplete data
                $$.ajax({
                    url: 'js/GetStops.html',
                    method: 'GET',
                    dataType: 'json',
                    //send "query" to server. Useful in case you generate response dynamically
                    data: {
                        stopName: query
                    },
                    success: function (data) {
                        // Find matched items
                        for (var i = 0; i < data.length; i++) {
                            if (data[i].name.toLowerCase().indexOf(query.toLowerCase()) >= 0) results.push(data[i]);
                        }
                        // Hide Preoloader
                        autocomplete.hidePreloader();
                        // Render items by passing array with result items
                        render(results);
                    }
                });
            }
        });
    });
    document.getElementById("favs").setAttribute("href","http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=".concat(getCookie("GeNav_Favs")));
    document.getElementById("homeFav").setAttribute("href","http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=".concat(getCookie("GeNav_Favs")));
    function setCookie(cname, cvalue, exdays) {
//        var d = new Date();
//        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
//        var expires = "expires="+d.toUTCString();
//        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        window.localStorage.setItem(cname,cvalue);
        writeFile("files/" + cname + ".txt", cvalue)
    }
    function writeFile(fileEntry, dataObj) {
        // Create a FileWriter object for our FileEntry (log.txt).
        fileEntry.createWriter(function (fileWriter) {

            fileWriter.onwriteend = function() {
                console.log("Successful file write...");
                readFile(fileEntry);
            };

            fileWriter.onerror = function (e) {
                console.log("Failed file write: " + e.toString());
            };

            // If data object is not passed in,
            // create a new Blob instead.
            if (!dataObj) {
                dataObj = new Blob(['some file data'], { type: 'text/plain' });
            }

            fileWriter.write(dataObj);
        });
    }


    function getCookie(cname) {
        if (window.localStorage.getItem(cname) == null) {
            var str = "CVIN,BAIR,AERO,";
        } else {
            var str = window.localStorage.getItem(cname);
        }
//        var name = cname + "=";
//        var ca = document.cookie.split(';');
//        for(var i = 0; i < ca.length; i++) {
//            var c = ca[i];
//            while (c.charAt(0) == ' ') {
//                c = c.substring(1);
//            }
//            if (c.indexOf(name) == 0) {
//                return c.substring(name.length, c.length);
//            }
//        }
//        return "";
        return str;
    }
    var contains = function(needle) {
        // Per spec, the way to identify NaN is that it is not equal to itself
        var findNaN = needle !== needle;
        var indexOf;

        if(!findNaN && typeof Array.prototype.indexOf === 'function') {
            indexOf = Array.prototype.indexOf;
        } else {
            indexOf = function(needle) {
                var i = -1, index = -1;

                for(i = 0; i < this.length; i++) {
                    var item = this[i];

                    if((findNaN && item !== item) || item === needle) {
                        index = i;
                        break;
                    }
                }

                return index;
            };
        }

        return indexOf.call(this, needle) > -1;
    };
    myApp.onPageInit('stop', function (page) {
        isFav();
        myApp.closeModal();
        console.log(page);
    });
    myApp.onPageInit('dep', function (page) {
        myApp.closeModal();
        console.log(page);
    });
    myApp.onPageAfterAnimation('times', function (page) {
        myApp.closeModal();
        document.getElementById("search").setAttribute("placeholder", translateStr("search", currentLang));
        console.log(page);
    });
    myApp.onPageAfterAnimation('favs', function (page) {
        myApp.closeModal();
        document.getElementById("search").setAttribute("placeholder", translateStr("search", currentLang));
        console.log(page);
    });
    function fav() {
        var fav = document.getElementById("currStopCode").innerHTML;
        var cokies = getCookie("TPGAPP_Favs").split(",");
        if(contains.call(cokies,fav)){
            remove4rmFavs();
            document.getElementById("FABIcon").innerHTML = "favorite_outline";
        } else {
            add2Favs();
            document.getElementById("FABIcon").innerHTML = "favorite";
        }
    }
    function isFav() {
        var fav = document.getElementById("currStopCode").innerHTML;
        var cokies = getCookie("TPGAPP_Favs").split(",");
        if(contains.call(cokies,fav)){
            document.getElementById("FABIcon").innerHTML = "favorite";
        } else {
            document.getElementById("FABIcon").innerHTML = "favorite_outline";
        }
    }
    function add2Favs() {
        var fav = document.getElementById("currStopCode").innerHTML;
        var cokies = getCookie("TPGAPP_Favs").split(",");
        cokies.push(fav);
        var str = cokies.join(",");
        if (str.substring(0, 1) == ',') {
            str = str.substring(1);
        }
        setCookie("TPGAPP_Favs",str,365);
        document.getElementById("favs").setAttribute("href","http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=".concat(getCookie("TPGAPP_Favs")));
        document.getElementById("homeFav").setAttribute("href","http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=".concat(getCookie("TPGAPP_Favs")));
        return getCookie("TPGAPP_Favs");
    }
    function remove4rmFavs() {
        var fav = document.getElementById("currStopCode").innerHTML;
        var cokies = getCookie("TPGAPP_Favs").split(",");
        var index = cokies.indexOf(fav);
        if (index > -1) {
            cokies.splice(index, 1);
        }
        var str = cokies.join(",");
        if (str.substring(0, 1) == ',') {
            str = str.substring(1);
        }
        setCookie("TPGAPP_Favs",str,365);
        document.getElementById("favs").setAttribute("href","http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=".concat(getCookie("TPGAPP_Favs")));
        document.getElementById("homeFav").setAttribute("href","http://cityrunner-server.genav.ga/hosted_app/favs.php?stopCodes=".concat(getCookie("TPGAPP_Favs")));
        return getCookie("TPGAPP_Favs");
    }
    refreshdiststopdep();
    function refreshdiststopdep() {
        var getValue = $('.page-on-center').attr("data-page");
        //console.log(getValue);
        if (getValue == 'disruptions') {
            mainView.router.reloadPage("http://cityrunner-server.genav.ga/hosted_app/disruptions.php");
            console.log("currently reloading disruptions page");
        }
        if (getValue == 'dep') {
            mainView.router.reloadPage("http://cityrunner-server.genav.ga/hosted_app/dep.php?dc=".concat(document.getElementById("currDepCode").innerHTML));
            console.log("currently reloading dep page");
        }
        if (getValue == 'stop') {
            mainView.router.reloadPage("http://cityrunner-server.genav.ga/hosted_app/stop.php?stop=".concat(document.getElementById("currStopCode").innerHTML));
            console.log("currently reloading stop page");
        }
        setTimeout(function () {
            refreshdiststopdep();
        },30000);
    }
    myApp.onPageBack("stop",function (data) {
        console.log(data + " changed the title on back.");
        title2TPGApp();
    });
    myApp.onPageBack("dep",function (data) {
        console.log(data + " changed the title on back.");
        document.getElementById("title").innerHTML = document.getElementById("currStopName").innerHTML + " - " + document.getElementById("currStopCode").innerHTML;
        document.getElementById("navbar").style.color = "#fff";
        document.getElementById("navbar").style.backgroundColor = "#f44336";
        try {
            StatusBar.backgroundColorByHexString("#ba000d");
        } catch(e) {
            console.error(e);
        }
    });
    function title2TPGApp() {
        document.getElementById("title").innerHTML = "GéNav";
        document.getElementById("navbar").style.color = "#fff";
        document.getElementById("navbar").style.backgroundColor = "#f44336";
        try {
            StatusBar.backgroundColorByHexString("#ba000d");
        } catch(e) {
            console.error(e);
        }

    }
    function updateLink() {
        var href = "../hosted_app/dir.php?origin=";
        href = href + encodeURIComponent(document.getElementById('origin').value) + '&destination=' + encodeURIComponent(document.getElementById('destination').value);
        document.getElementById("btn").href = href;
    }
    function dirSubmit(d) {
        var frm = $(d);

        frm.submit(function (e) {

            e.preventDefault();

            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),
                success: function (data) {
                    console.log('Submission was successful.');
                    console.log(data);
                    $("return").innerHTML = data;
                },
                error: function (data) {
                    console.log('An error occurred.');
                    console.log(data);
                },
            });
        });
        //console.log($.get('../inc/php/mapsCalculator.php?' + $(d).serialize()));
    }
    var origin = document.getElementById("origin");
    function prefillOrigin() {
        origin = document.getElementById("origin");
        getLocation();
    }
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            origin.value = "Geolocation is not supported by this browser.";
        }
    }
    function showPosition(position) {
        origin.value = position.coords.latitude + "," + position.coords.longitude;
    }
    function iosMaterialConv() {
    /*    var platform = device.platform;
        //var platform = "ios";
        if (platform == "ios") {
            document.getElementById("f7-main").href = "css/framework7.ios.min.css";
            document.getElementById("f7-colors").href = "css/framework7.ios.colors.min.css";
        } else {
            document.getElementById("f7-main").href = "css/framework7.material.min.css";
            document.getElementById("f7-colors").href = "css/framework7.material.colors.min.css";
        }*/
    }
    function checkConnection() {
        var networkState = navigator.connection.type;

        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.CELL]     = 'Cell generic connection';
        states[Connection.NONE]     = 'No network connection';

        return states[networkState];
    }
        $('.hosted').click(function () {
            if (checkConnection() == 'No network connection') {
                myApp.alert("Sorry but you cannot access this page while offline", "Sorry");
            }
        });
document.addEventListener(
    'deviceready',
    function(){
        AppUpdater('http://cityrunner-server.genav.ga/app_update/');
    },
    false
);
</script>
</body>
</html>
